# Staging Environment Configuration
# Copy this file to .env.staging and fill in actual values

# ============================================================================
# APPLICATION
# ============================================================================
ENVIRONMENT=staging
DEBUG=true
LOG_LEVEL=DEBUG

# ============================================================================
# TELEGRAM BOT
# ============================================================================
BOT_TOKEN=your_staging_bot_token_from_botfather

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=staging_postgres_password
POSTGRES_DB=tgquiznft_staging
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql+asyncpg://postgres:staging_postgres_password@postgres:5432/tgquiznft_staging

# Database connection pool settings (smaller for staging)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================================================
# REDIS
# ============================================================================
REDIS_URL=redis://:staging_redis_password@redis:6379/0
REDIS_PASSWORD=staging_redis_password

# ============================================================================
# TON BLOCKCHAIN (TESTNET)
# ============================================================================
TON_API_KEY=your_staging_ton_api_key
TON_NETWORK=testnet
TON_WALLET_MNEMONIC=your 24 word mnemonic phrase here for testnet wallet
TON_WALLET_VERSION=v4r2
NFT_COLLECTION_ADDRESS=EQD...your_testnet_collection_address

# NFT pricing (in testnet TON - free or minimal)
NFT_MINT_PRICE=0.01

# ============================================================================
# IPFS STORAGE (Pinata)
# ============================================================================
PINATA_API_KEY=your_staging_pinata_api_key
PINATA_SECRET_KEY=your_staging_pinata_secret_key
PINATA_GATEWAY_URL=https://gateway.pinata.cloud

# ============================================================================
# API SERVER
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_RELOAD=true

# CORS Configuration (more permissive for staging)
CORS_ORIGINS=["*"]
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# SECURITY
# ============================================================================
SECRET_KEY=staging_secret_key_change_me
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# Rate limiting (more lenient for staging)
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_PER_HOUR=5000

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
# Sentry for error tracking
SENTRY_DSN=https://your_staging_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=1.0  # 100% sampling in staging

# Logging
LOG_FORMAT=pretty
LOG_FILE_PATH=/var/log/tgquiz/staging.log
LOG_ROTATION=50 MB
LOG_RETENTION=7 days

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================
WEBHOOK_URL=https://staging-api.yourdomain.com/webhook
WEBHOOK_SECRET=staging_webhook_secret

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================
# TON Connect for payments
TON_CONNECT_MANIFEST_URL=https://staging-api.yourdomain.com/tonconnect-manifest.json

# ============================================================================
# BACKUP & MAINTENANCE
# ============================================================================
BACKUP_ENABLED=false  # Typically disabled in staging
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7

# ============================================================================
# METRICS & PERFORMANCE
# ============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics

# ============================================================================
# FEATURE FLAGS (can test new features here)
# ============================================================================
ENABLE_NFT_MINTING=true
ENABLE_QUIZ_SHARING=true
ENABLE_ADMIN_PANEL=true
MAINTENANCE_MODE=false
ENABLE_EXPERIMENTAL_FEATURES=true
